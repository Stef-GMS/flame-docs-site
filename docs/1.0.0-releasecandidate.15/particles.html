
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Particles &#8212; Flame</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Layers" href="layers.html" />
    <link rel="prev" title="Palette" href="palette.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo_flame.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Basic concepts
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="structure.html">
   File structure
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="game.html">
   FlameGame
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="components.html">
   Components
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="platforms.html">
   Platforms
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="collision_detection.html">
   Collision detection
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="effects.html">
   Effects
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="camera_and_viewport.html">
   Camera &amp; Viewport
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Inputs
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="gesture-input.html">
   Gesture input
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="keyboard-input.html">
   Keyboard input
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="other-inputs.html">
   Other inputs
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Audio
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="audio.html">
   General audio
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="bgm.html">
   Background music
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Rendering
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="images.html">
   Images, sprites and animations
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="text.html">
   Text rendering
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="palette.html">
   Colors and palette
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Particles
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="layers.html">
   Layers
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Other Modules
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="util.html">
   Util
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="widgets.html">
   Widgets
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="forge2d.html">
   Forge2D
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="oxygen.html">
   Oxygen
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="tiled.html">
   Tiled
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="debug.html">
   Debugging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="splash_screen.html">
   Splash screen
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Theme by the <a href="https://ebp.jupyterbook.org">Executable Book Project</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/particles.md.txt"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.md</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/flame-engine/flame"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        
        <a class="edit-button" href="https://github.com/flame-engine/flame/edit/main/doc/particles.md"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lifecycle">
   Lifecycle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#built-in-particles">
   Built-in particles
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#movingparticle">
   MovingParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#acceleratedparticle">
   AcceleratedParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#circleparticle">
   CircleParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#spriteparticle">
   SpriteParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#imageparticle">
   ImageParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#animationparticle">
   AnimationParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#componentparticle">
   ComponentParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#flareparticle">
   FlareParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#computedparticle">
   ComputedParticle
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#nesting-behavior">
   Nesting behavior
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <section class="tex2jax_ignore mathjax_ignore" id="particles">
<h1>Particles<a class="headerlink" href="#particles" title="Permalink to this headline">¶</a></h1>
<p>Flame offers a basic, yet robust and extendable particle system. The core concept of this system is
the <code class="docutils literal notranslate"><span class="pre">Particle</span></code> class, which is very similar in its behavior to the <code class="docutils literal notranslate"><span class="pre">ParticleComponent</span></code>.</p>
<p>The most basic usage of a <code class="docutils literal notranslate"><span class="pre">Particle</span></code> with <code class="docutils literal notranslate"><span class="pre">FlameGame</span></code> would look as following:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="s1">&#39;package:flame/components.dart&#39;</span><span class="p">;</span>

<span class="c1">// ... </span>

<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="c1">// Wrapping a Particle with ParticleComponent</span>
  <span class="c1">// which maps Component lifecycle hooks to Particle ones</span>
  <span class="c1">// and embeds a trigger for removing the component.</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">CircleParticle</span><span class="p">(),</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
<p>When using <code class="docutils literal notranslate"><span class="pre">Particle</span></code> with a custom <code class="docutils literal notranslate"><span class="pre">Game</span></code> implementation, please ensure that both the <code class="docutils literal notranslate"><span class="pre">update</span></code> and
<code class="docutils literal notranslate"><span class="pre">render</span></code> methods are called during each game loop tick.</p>
<p>Main approaches to implement desired particle effects:</p>
<ul class="simple">
<li><p>Composition of existing behaviors.</p></li>
<li><p>Use behavior chaining (just a syntactic sugar of the first one).</p></li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">ComputedParticle</span></code>.</p></li>
</ul>
<p>Composition works in a similar fashion to those of Flutter widgets by defining the effect from top
to bottom. Chaining allows to express the same composition trees more fluently by defining behaviors
from bottom to top. Computed particles in their turn fully delegate implementation of the behavior
to your code. Any of the approaches could be used in conjunction with existing behaviors where
needed.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">Random</span> <span class="n">rnd</span> <span class="o">=</span> <span class="n">Random</span><span class="p">();</span>

<span class="n">Vector2</span> <span class="n">randomVector2</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">rnd</span><span class="p">)</span> <span class="o">-</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">rnd</span><span class="p">))</span> <span class="o">*</span> <span class="m">200</span><span class="p">;</span>

<span class="c1">// Composition.</span>
<span class="c1">// </span>
<span class="c1">// Defining a particle effect as a set of nested behaviors from top to bottom, one within another: </span>
<span class="c1">// ParticleComponent </span>
<span class="c1">//   &gt; ComposedParticle </span>
<span class="c1">//     &gt; AcceleratedParticle </span>
<span class="c1">//       &gt; CircleParticle</span>
<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">Particle</span><span class="p">.</span><span class="n">generate</span><span class="p">(</span>
      <span class="nl">count:</span> <span class="m">10</span><span class="p">,</span>
      <span class="nl">generator:</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">AcceleratedParticle</span><span class="p">(</span>
        <span class="nl">acceleration:</span> <span class="n">randomVector2</span><span class="p">(),</span>
        <span class="nl">child:</span> <span class="n">CircleParticle</span><span class="p">(</span>
          <span class="nl">paint:</span> <span class="n">Paint</span><span class="p">()..</span><span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">.</span><span class="n">red</span><span class="p">,</span>
        <span class="p">),</span>
      <span class="p">),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">);</span>

<span class="c1">// Chaining.</span>
<span class="c1">// </span>
<span class="c1">// Expresses the same behavior as above, but with a more fluent API.</span>
<span class="c1">// Only Particles with SingleChildParticle mixin can be used as chainable behaviors.</span>
<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">Particle</span>
    <span class="p">.</span><span class="n">generate</span><span class="p">(</span>
      <span class="nl">count:</span> <span class="m">10</span><span class="p">,</span>
      <span class="nl">generator:</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">CircleParticle</span><span class="p">(</span><span class="nl">paint:</span> <span class="n">Paint</span><span class="p">()..</span><span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">.</span><span class="n">red</span><span class="p">)</span>
                    <span class="p">.</span><span class="n">accelerating</span><span class="p">(</span><span class="n">randomVector2</span><span class="p">())</span>
      <span class="p">)</span>
      <span class="p">.</span><span class="n">asComponent</span><span class="p">(),</span>
<span class="p">);</span>

<span class="c1">// Computed Particle.</span>
<span class="c1">// </span>
<span class="c1">// All the behaviors are defined explicitly. Offers greater flexibility</span>
<span class="c1">// compared to built-in behaviors.</span>
<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">Particle</span>
    <span class="p">.</span><span class="n">generate</span><span class="p">(</span>
      <span class="nl">count:</span> <span class="m">10</span><span class="p">,</span>
      <span class="nl">generator:</span> <span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">final</span> <span class="n">position</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
        <span class="kd">final</span> <span class="n">speed</span> <span class="o">=</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">();</span>
        <span class="kd">final</span> <span class="n">acceleration</span> <span class="o">=</span> <span class="n">randomVector2</span><span class="p">();</span>
        <span class="kd">final</span> <span class="n">paint</span> <span class="o">=</span> <span class="n">Paint</span><span class="p">()..</span><span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">.</span><span class="n">red</span><span class="p">;</span>

        <span class="k">return</span> <span class="n">ComputedParticle</span><span class="p">(</span>
          <span class="nl">renderer:</span> <span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">_</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">speed</span> <span class="o">+=</span> <span class="n">acceleration</span><span class="p">;</span>
            <span class="n">position</span> <span class="o">+=</span> <span class="n">speed</span><span class="p">;</span>
            <span class="n">canvas</span><span class="p">.</span><span class="n">drawCircle</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="m">10</span><span class="p">,</span> <span class="n">paint</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">);</span>
      <span class="p">}</span>
    <span class="p">)</span>
    <span class="p">.</span><span class="n">asComponent</span><span class="p">()</span>
<span class="p">)</span>
</pre></div>
</div>
<p>You can find more examples of how to use different built-in particles in various combinations
<a class="reference external" href="https://github.com/flame-engine/flame/blob/main/examples/lib/stories/utils/particles.dart">here</a>.</p>
<section id="lifecycle">
<h2>Lifecycle<a class="headerlink" href="#lifecycle" title="Permalink to this headline">¶</a></h2>
<p>A behavior common to all <code class="docutils literal notranslate"><span class="pre">Particle</span></code>s is that all of them accept a <code class="docutils literal notranslate"><span class="pre">lifespan</span></code> argument. This value is
used to make the <code class="docutils literal notranslate"><span class="pre">ParticleComponent</span></code> remove itself once its internal <code class="docutils literal notranslate"><span class="pre">Particle</span></code> has reached the end
of its life. Time within the <code class="docutils literal notranslate"><span class="pre">Particle</span></code> itself is tracked using the Flame <code class="docutils literal notranslate"><span class="pre">Timer</span></code> class. It can be
configured with a <code class="docutils literal notranslate"><span class="pre">double</span></code>, represented in seconds (with microsecond precision) by passing it into
the corresponding <code class="docutils literal notranslate"><span class="pre">Particle</span></code> constructor.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">Particle</span><span class="p">(</span><span class="nl">lifespan:</span> <span class="p">.</span><span class="m">2</span><span class="p">);</span> <span class="c1">// will live for 200ms.</span>
<span class="n">Particle</span><span class="p">(</span><span class="nl">lifespan:</span> <span class="m">4</span><span class="p">);</span> <span class="c1">// will live for 4s.</span>
</pre></div>
</div>
<p>It is also possible to reset a <code class="docutils literal notranslate"><span class="pre">Particle</span></code>’s lifespan by using the <code class="docutils literal notranslate"><span class="pre">setLifespan</span></code> method, which also
accepts a <code class="docutils literal notranslate"><span class="pre">double</span></code> of seconds.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">particle</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">(</span><span class="nl">lifespan:</span> <span class="m">2</span><span class="p">);</span>

<span class="c1">// ... after some time.</span>
<span class="n">particle</span><span class="p">.</span><span class="n">setLifespan</span><span class="p">(</span><span class="m">2</span><span class="p">)</span> <span class="c1">// will live for another 2s.</span>
</pre></div>
</div>
<p>During its lifetime, a <code class="docutils literal notranslate"><span class="pre">Particle</span></code> tracks the time it was alive and exposes it through the <code class="docutils literal notranslate"><span class="pre">progress</span></code>
getter, which returns a value between <code class="docutils literal notranslate"><span class="pre">0.0</span></code> and <code class="docutils literal notranslate"><span class="pre">1.0</span></code>. This value can be used in a similar fashion
as the <code class="docutils literal notranslate"><span class="pre">value</span></code> property of the <code class="docutils literal notranslate"><span class="pre">AnimationController</span></code> class in Flutter.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">particle</span> <span class="o">=</span> <span class="n">Particle</span><span class="p">(</span><span class="nl">lifespan:</span> <span class="m">2.0</span><span class="p">);</span>

<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span><span class="n">ParticleComponent</span><span class="p">(</span><span class="nl">particle:</span> <span class="n">particle</span><span class="p">));</span>

<span class="c1">// Will print values from 0 to 1 with step of .1: 0, 0.1, 0.2 ... 0.9, 1.0.</span>
<span class="n">Timer</span><span class="p">.</span><span class="n">periodic</span><span class="p">(</span><span class="n">duration</span> <span class="o">*</span> <span class="p">.</span><span class="m">1</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="n">print</span><span class="p">(</span><span class="n">particle</span><span class="p">.</span><span class="n">progress</span><span class="p">));</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">lifespan</span></code> is passed down to all the descendants of a given <code class="docutils literal notranslate"><span class="pre">Particle</span></code>, if it supports any of
the nesting behaviors.</p>
</section>
<section id="built-in-particles">
<h2>Built-in particles<a class="headerlink" href="#built-in-particles" title="Permalink to this headline">¶</a></h2>
<p>Flame ships with a few built-in <code class="docutils literal notranslate"><span class="pre">Particle</span></code> behaviors:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">TranslatedParticle</span></code> translates its <code class="docutils literal notranslate"><span class="pre">child</span></code> by given <code class="docutils literal notranslate"><span class="pre">Vector2</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">MovingParticle</span></code> moves its <code class="docutils literal notranslate"><span class="pre">child</span></code> between two predefined <code class="docutils literal notranslate"><span class="pre">Vector2</span></code>, supports <code class="docutils literal notranslate"><span class="pre">Curve</span></code></p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">AcceleratedParticle</span></code> allows basic physics based effects, like gravitation or speed dampening</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">CircleParticle</span></code> renders circles of all shapes and sizes</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">SpriteParticle</span></code> renders Flame <code class="docutils literal notranslate"><span class="pre">Sprite</span></code> within a <code class="docutils literal notranslate"><span class="pre">Particle</span></code> effect</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ImageParticle</span></code> renders <em>dart:ui</em> <code class="docutils literal notranslate"><span class="pre">Image</span></code> within a <code class="docutils literal notranslate"><span class="pre">Particle</span></code> effect</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ComponentParticle</span></code> renders Flame <code class="docutils literal notranslate"><span class="pre">Component</span></code> within a <code class="docutils literal notranslate"><span class="pre">Particle</span></code> effect</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">FlareParticle</span></code> renders Flare animation within a <code class="docutils literal notranslate"><span class="pre">Particle</span></code> effect</p></li>
</ul>
<p>More examples of how to use these behaviors together are available
<a class="reference external" href="https://github.com/flame-engine/flame/blob/main/examples/lib/stories/utils/particles.dart">here</a>.
All the implementations are available in the
<a class="reference external" href="https://github.com/flame-engine/flame/tree/main/packages/flame/lib/src/particles">particles</a> folder
on the Flame repository.</p>
<p>Simply translates the underlying <code class="docutils literal notranslate"><span class="pre">Particle</span></code> to a specified <code class="docutils literal notranslate"><span class="pre">Vector2</span></code> within the rendering <code class="docutils literal notranslate"><span class="pre">Canvas</span></code>.
Does not change or alter its position, consider using <code class="docutils literal notranslate"><span class="pre">MovingParticle</span></code> or <code class="docutils literal notranslate"><span class="pre">AcceleratedParticle</span></code>
where change of position is required.</p>
<p>Simply translates the underlying <code class="docutils literal notranslate"><span class="pre">Particle</span></code> to a specified <code class="docutils literal notranslate"><span class="pre">Vector2</span></code> within the rendering <code class="docutils literal notranslate"><span class="pre">Canvas</span></code>.
Does not change or alter its position, consider using <code class="docutils literal notranslate"><span class="pre">MovingParticle</span></code> or <code class="docutils literal notranslate"><span class="pre">AcceleratedParticle</span></code>
where change of position is required. Same effect could be achieved by translating the <code class="docutils literal notranslate"><span class="pre">Canvas</span></code>
layer.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">TranslatedParticle</span><span class="p">(</span>
      <span class="c1">// Will translate the child Particle effect to the center of game canvas.</span>
      <span class="nl">offset:</span> <span class="n">game</span><span class="p">.</span><span class="n">size</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span>
      <span class="nl">child:</span> <span class="n">Particle</span><span class="p">(),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="movingparticle">
<h2>MovingParticle<a class="headerlink" href="#movingparticle" title="Permalink to this headline">¶</a></h2>
<p>Moves the child <code class="docutils literal notranslate"><span class="pre">Particle</span></code> between the <code class="docutils literal notranslate"><span class="pre">from</span></code> and <code class="docutils literal notranslate"><span class="pre">to</span></code> <code class="docutils literal notranslate"><span class="pre">Vector2</span></code>s during its lifespan. Supports
<code class="docutils literal notranslate"><span class="pre">Curve</span></code> via <code class="docutils literal notranslate"><span class="pre">CurvedParticle</span></code>.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">MovingParticle</span><span class="p">(</span>
      <span class="c1">// Will move from corner to corner of the game canvas.</span>
      <span class="nl">from:</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">(),</span>
      <span class="nl">to:</span> <span class="n">game</span><span class="p">.</span><span class="n">size</span><span class="p">,</span>
      <span class="nl">child:</span> <span class="n">Particle</span><span class="p">(),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="acceleratedparticle">
<h2>AcceleratedParticle<a class="headerlink" href="#acceleratedparticle" title="Permalink to this headline">¶</a></h2>
<p>A basic physics particle which allows you to specify its initial <code class="docutils literal notranslate"><span class="pre">position</span></code>, <code class="docutils literal notranslate"><span class="pre">speed</span></code> and
<code class="docutils literal notranslate"><span class="pre">acceleration</span></code> and lets the <code class="docutils literal notranslate"><span class="pre">update</span></code> cycle do the rest. All three are specified as <code class="docutils literal notranslate"><span class="pre">Vector2</span></code>s, which
you can think of as vectors. It works especially well for physics-based “bursts”, but it is not
limited to that. Unit of the <code class="docutils literal notranslate"><span class="pre">Vector2</span></code> value is <em>logical px/s</em>. So a speed of <code class="docutils literal notranslate"><span class="pre">Vector2(0,</span> <span class="pre">100)</span></code> will
move a child <code class="docutils literal notranslate"><span class="pre">Particle</span></code> by 100 logical pixels of the device every second of game time.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">rng</span> <span class="o">=</span> <span class="n">Random</span><span class="p">();</span>
<span class="n">Vector2</span> <span class="n">randomVector2</span><span class="p">()</span> <span class="o">=&gt;</span> <span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">random</span><span class="p">)</span> <span class="o">-</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">rng</span><span class="p">))</span> <span class="o">*</span> <span class="m">100</span><span class="p">;</span>

<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">AcceleratedParticle</span><span class="p">(</span>
      <span class="c1">// Will fire off in the center of game canvas</span>
      <span class="nl">position:</span> <span class="n">game</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">center</span><span class="p">(</span><span class="n">Vector2</span><span class="p">.</span><span class="n">zero</span><span class="p">()),</span>
      <span class="c1">// With random initial speed of Vector2(-100..100, 0..-100)</span>
      <span class="nl">speed:</span> <span class="n">Vector2</span><span class="p">(</span><span class="n">rnd</span><span class="p">.</span><span class="n">nextDouble</span><span class="p">()</span> <span class="o">*</span> <span class="m">200</span> <span class="o">-</span> <span class="m">100</span><span class="p">,</span> <span class="o">-</span><span class="n">rnd</span><span class="p">.</span><span class="n">nextDouble</span><span class="p">()</span> <span class="o">*</span> <span class="m">100</span><span class="p">),</span>
      <span class="c1">// Accelerating downwards, simulating &quot;gravity&quot;</span>
      <span class="nl">speed:</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">100</span><span class="p">),</span>
      <span class="nl">child:</span> <span class="n">Particle</span><span class="p">(),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="circleparticle">
<h2>CircleParticle<a class="headerlink" href="#circleparticle" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">Particle</span></code> which renders a circle with given <code class="docutils literal notranslate"><span class="pre">Paint</span></code> at the zero offset of passed <code class="docutils literal notranslate"><span class="pre">Canvas</span></code>. Use in
conjunction with <code class="docutils literal notranslate"><span class="pre">TranslatedParticle</span></code>, <code class="docutils literal notranslate"><span class="pre">MovingParticle</span></code> or <code class="docutils literal notranslate"><span class="pre">AcceleratedParticle</span></code> in order to achieve
desired positioning.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">CircleParticle</span><span class="p">(</span>
      <span class="nl">radius:</span> <span class="n">game</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">x</span> <span class="o">/</span> <span class="m">2</span><span class="p">,</span>
      <span class="nl">paint:</span> <span class="n">Paint</span><span class="p">()..</span><span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">.</span><span class="n">red</span><span class="p">.</span><span class="n">withOpacity</span><span class="p">(.</span><span class="m">5</span><span class="p">),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="spriteparticle">
<h2>SpriteParticle<a class="headerlink" href="#spriteparticle" title="Permalink to this headline">¶</a></h2>
<p>Allows you to embed a <code class="docutils literal notranslate"><span class="pre">Sprite</span></code> into your particle effects.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
  <span class="nl">particle:</span> <span class="n">SpriteParticle</span><span class="p">(</span>
      <span class="nl">sprite:</span> <span class="n">Sprite</span><span class="p">(</span><span class="s1">&#39;sprite.png&#39;</span><span class="p">),</span>
      <span class="nl">size:</span> <span class="n">Vector2</span><span class="p">(</span><span class="m">64</span><span class="p">,</span> <span class="m">64</span><span class="p">),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="imageparticle">
<h2>ImageParticle<a class="headerlink" href="#imageparticle" title="Permalink to this headline">¶</a></h2>
<p>Renders given <code class="docutils literal notranslate"><span class="pre">dart:ui</span></code> image within the particle tree.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="c1">// During game initialisation</span>
<span class="kd">await</span> <span class="n">Flame</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">loadAll</span><span class="p">(</span><span class="k">const</span> <span class="p">[</span>
  <span class="s1">&#39;image.png&#39;</span><span class="p">,</span>
<span class="p">]);</span>

<span class="c1">// ...</span>

<span class="c1">// Somewhere during the game loop</span>
<span class="kd">final</span> <span class="n">image</span> <span class="o">=</span> <span class="kd">await</span> <span class="n">Flame</span><span class="p">.</span><span class="n">images</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;image.png&#39;</span><span class="p">);</span>

<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">ImageParticle</span><span class="p">(</span>
      <span class="nl">size:</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">all</span><span class="p">(</span><span class="m">24</span><span class="p">),</span>
      <span class="nl">image:</span> <span class="n">image</span><span class="p">,</span>
    <span class="p">);</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="animationparticle">
<h2>AnimationParticle<a class="headerlink" href="#animationparticle" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">Particle</span></code> which embeds an <code class="docutils literal notranslate"><span class="pre">Animation</span></code>. By default, aligns the <code class="docutils literal notranslate"><span class="pre">Animation</span></code>’s <code class="docutils literal notranslate"><span class="pre">stepTime</span></code> so that
it’s fully played during the <code class="docutils literal notranslate"><span class="pre">Particle</span></code> lifespan. It’s possible to override this behavior with the
<code class="docutils literal notranslate"><span class="pre">alignAnimationTime</span></code> argument.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">spritesheet</span> <span class="o">=</span> <span class="n">SpriteSheet</span><span class="p">(</span>
  <span class="nl">image:</span> <span class="n">yourSpriteSheetImage</span><span class="p">,</span>
  <span class="nl">srcSize:</span> <span class="n">Vector2</span><span class="p">.</span><span class="n">all</span><span class="p">(</span><span class="m">16.0</span><span class="p">),</span>
<span class="p">);</span>

<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">AnimationParticle</span><span class="p">(</span>
      <span class="nl">animation:</span> <span class="n">spritesheet</span><span class="p">.</span><span class="n">createAnimation</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="nl">stepTime:</span> <span class="m">0.1</span><span class="p">),</span>
    <span class="p">);</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="componentparticle">
<h2>ComponentParticle<a class="headerlink" href="#componentparticle" title="Permalink to this headline">¶</a></h2>
<p>This <code class="docutils literal notranslate"><span class="pre">Particle</span></code> allows you to embed a <code class="docutils literal notranslate"><span class="pre">Component</span></code> within the particle effects. The <code class="docutils literal notranslate"><span class="pre">Component</span></code> could
have its own <code class="docutils literal notranslate"><span class="pre">update</span></code> lifecycle and could be reused across different effect trees. If the only thing
you need is to add some dynamics to an instance of a certain <code class="docutils literal notranslate"><span class="pre">Component</span></code>, please consider adding it
to the <code class="docutils literal notranslate"><span class="pre">game</span></code> directly, without the <code class="docutils literal notranslate"><span class="pre">Particle</span></code> in the middle.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">final</span> <span class="n">longLivingRect</span> <span class="o">=</span> <span class="n">RectComponent</span><span class="p">();</span>

<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">ComponentParticle</span><span class="p">(</span>
      <span class="nl">component:</span> <span class="n">longLivingRect</span>
    <span class="p">);</span>
  <span class="p">),</span>
<span class="p">);</span>

<span class="kd">class</span> <span class="nc">RectComponent</span> <span class="kd">extends</span> <span class="n">Component</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">render</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">c</span><span class="p">.</span><span class="n">drawRect</span><span class="p">(</span>
      <span class="n">Rect</span><span class="p">.</span><span class="n">fromCenter</span><span class="p">(</span><span class="nl">center:</span> <span class="n">Offset</span><span class="p">.</span><span class="n">zero</span><span class="p">,</span> <span class="nl">width:</span> <span class="m">100</span><span class="p">,</span> <span class="nl">height:</span> <span class="m">100</span><span class="p">),</span> 
      <span class="n">Paint</span><span class="p">()..</span><span class="n">color</span> <span class="o">=</span> <span class="n">Colors</span><span class="p">.</span><span class="n">red</span>
    <span class="p">);</span>
  <span class="p">}</span>

  <span class="kt">void</span> <span class="n">update</span><span class="p">(</span><span class="kt">double</span> <span class="n">dt</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">/// Will be called by parent [Particle]</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="flareparticle">
<h2>FlareParticle<a class="headerlink" href="#flareparticle" title="Permalink to this headline">¶</a></h2>
<p>To use Flare within Flame, use the <a class="reference external" href="https://github.com/flame-engine/flame_flare"><code class="docutils literal notranslate"><span class="pre">flame_flare</span></code></a>
package.</p>
<p>It will provide a class called <code class="docutils literal notranslate"><span class="pre">FlareParticle</span></code> that is a container for <code class="docutils literal notranslate"><span class="pre">FlareActorAnimation</span></code>, it
propagates the <code class="docutils literal notranslate"><span class="pre">update</span></code> and <code class="docutils literal notranslate"><span class="pre">render</span></code> methods to its child.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="k">import</span> <span class="s1">&#39;package:flame_flare/flame_flare.dart&#39;</span><span class="p">;</span>

<span class="c1">// Within your game or component&#39;s `onLoad` method</span>
<span class="k">const</span> <span class="n">flareSize</span> <span class="o">=</span> <span class="m">32.0</span><span class="p">;</span>
<span class="kd">final</span> <span class="n">flareAnimation</span> <span class="o">=</span> <span class="n">FlareActorAnimation</span><span class="p">(</span><span class="s1">&#39;assets/sparkle.flr&#39;</span><span class="p">);</span>
<span class="n">flareAnimation</span><span class="p">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">flareSize</span><span class="p">;</span> 
<span class="n">flareAnimation</span><span class="p">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">flareSize</span><span class="p">;</span>

<span class="c1">// Somewhere in game</span>
<span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="nl">particle:</span> <span class="n">FlareParticle</span><span class="p">(</span><span class="nl">flare:</span> <span class="n">flareAnimation</span><span class="p">),</span>
  <span class="p">),</span>
<span class="p">);</span>
</pre></div>
</div>
</section>
<section id="computedparticle">
<h2>ComputedParticle<a class="headerlink" href="#computedparticle" title="Permalink to this headline">¶</a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">Particle</span></code> which could help you when:</p>
<ul class="simple">
<li><p>Default behavior is not enough</p></li>
<li><p>Complex effects optimization</p></li>
<li><p>Custom easings</p></li>
</ul>
<p>When created, it delegates all the rendering to a supplied <code class="docutils literal notranslate"><span class="pre">ParticleRenderDelegate</span></code> which is called
on each frame to perform necessary computations and render something to the <code class="docutils literal notranslate"><span class="pre">Canvas</span></code>.</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="n">game</span><span class="p">.</span><span class="n">add</span><span class="p">(</span>
  <span class="n">ParticleComponent</span><span class="p">(</span>
    <span class="c1">// Renders a circle which gradually changes its color and size during the particle lifespan.</span>
    <span class="nl">particle:</span> <span class="n">ComputedParticle</span><span class="p">(</span>
      <span class="nl">renderer:</span> <span class="p">(</span><span class="n">canvas</span><span class="p">,</span> <span class="n">particle</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="n">canvas</span><span class="p">.</span><span class="n">drawCircle</span><span class="p">(</span>
        <span class="n">Offset</span><span class="p">.</span><span class="n">zero</span><span class="p">,</span>
        <span class="n">particle</span><span class="p">.</span><span class="n">progress</span> <span class="o">*</span> <span class="m">10</span><span class="p">,</span>
        <span class="n">Paint</span><span class="p">()</span>
          <span class="p">..</span><span class="n">color</span> <span class="o">=</span> <span class="n">Color</span><span class="p">.</span><span class="n">lerp</span><span class="p">(</span>
            <span class="n">Colors</span><span class="p">.</span><span class="n">red</span><span class="p">,</span>
            <span class="n">Colors</span><span class="p">.</span><span class="n">blue</span><span class="p">,</span>
            <span class="n">particle</span><span class="p">.</span><span class="n">progress</span><span class="p">,</span>
          <span class="p">),</span>
      <span class="p">),</span>
    <span class="p">),</span>
  <span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
<section id="nesting-behavior">
<h2>Nesting behavior<a class="headerlink" href="#nesting-behavior" title="Permalink to this headline">¶</a></h2>
<p>Flame’s implementation of particles follows the same pattern of extreme composition as Flutter
widgets. That is achieved by encapsulating small pieces of behavior in every particle and then
nesting these behaviors together to achieve the desired visual effect.</p>
<p>Two entities that allow <code class="docutils literal notranslate"><span class="pre">Particle</span></code>s to nest each other are: <code class="docutils literal notranslate"><span class="pre">SingleChildParticle</span></code> mixin and
<code class="docutils literal notranslate"><span class="pre">ComposedParticle</span></code> class.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">SingleChildParticle</span></code> may help you with creating <code class="docutils literal notranslate"><span class="pre">Particles</span></code> with a custom behavior. For example,
randomly positioning its child during each frame:</p>
<p>The <code class="docutils literal notranslate"><span class="pre">SingleChildParticle</span></code> may help you with creating <code class="docutils literal notranslate"><span class="pre">Particles</span></code> with a custom behavior.</p>
<p>For example, randomly positioning it’s child during each frame:</p>
<div class="highlight-dart notranslate"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="n">rnd</span> <span class="o">=</span> <span class="n">Random</span><span class="p">();</span>

<span class="kd">class</span> <span class="nc">GlitchParticle</span> <span class="kd">extends</span> <span class="n">Particle</span> <span class="kd">with</span> <span class="n">SingleChildParticle</span> <span class="p">{</span>
  <span class="nd">@override</span>
  <span class="n">Particle</span> <span class="n">child</span><span class="p">;</span>

  <span class="n">GlitchParticle</span><span class="p">({</span>
    <span class="nd">@required</span> <span class="k">this</span><span class="p">.</span><span class="n">child</span><span class="p">,</span>
    <span class="kt">double</span> <span class="n">lifespan</span><span class="p">,</span>
  <span class="p">})</span> <span class="o">:</span> <span class="k">super</span><span class="p">(</span><span class="nl">lifespan:</span> <span class="n">lifespan</span><span class="p">);</span>

  <span class="nd">@override</span>
  <span class="n">render</span><span class="p">(</span><span class="n">Canvas</span> <span class="n">canvas</span><span class="p">)</span>  <span class="p">{</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">save</span><span class="p">();</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">translate</span><span class="p">(</span><span class="n">rnd</span><span class="p">.</span><span class="n">nextDouble</span><span class="p">()</span> <span class="o">*</span> <span class="m">100</span><span class="p">,</span> <span class="n">rnd</span><span class="p">.</span><span class="n">nextDouble</span><span class="p">()</span> <span class="o">*</span> <span class="m">100</span><span class="p">);</span>

    <span class="c1">// Will also render the child</span>
    <span class="k">super</span><span class="p">.</span><span class="n">render</span><span class="p">();</span>

    <span class="n">canvas</span><span class="p">.</span><span class="n">restore</span><span class="p">();</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">ComposedParticle</span></code> could be used either as a standalone or within an existing <code class="docutils literal notranslate"><span class="pre">Particle</span></code> tree.</p>
</section>
</section>


              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="palette.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Palette</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="layers.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Layers</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Blue Fire Team<br/>
        
            &copy; Copyright 2021, Blue Fire Team.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>